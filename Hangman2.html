<!DOCTYPE html>
<html lang="en-us">

<head>
    <meta charset="UTF-8">
    <title>Hangman</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
</head>

<body>
    <div>
        <h1>Hangman!</h1>
    </div>
    <div>
        <p>Press any key to get started...</p>
        <p>Wins:
            <span id="wins-count">...</span>
        </p>
        <p>Current Word</p>
        <p>
            <span id="current-word">...</span>
        </p>
        <p>Number of guesses remaining:</p>
        <p>
            <span id="guesses-left">...</span>
        </p>
        <p>Letters already guessed</p>
        <p>
            <span id="letters-guessed">...</span>
        </p>
    </div>

    <script type="text/javascript">

        // words for game + global variables
        //================================================================================================
        var words = ['gladiator', 'chicago', 'argo', 'birdman', 'moonlight', 'spotlight'];
        var word;;
        var underscores;
        var gameStart = false;
        var winsCount = 0;
        var guessesLeft;
        var wrongGuesses;
        var lettersLeft;

        // choose random word
        //================================================================================================
        function newWord() {
            underscores = [];
            guessesLeft = 12;
            wrongGuesses = [];
            lettersLeft = ["a", "b", "c", "d", "e", "f", "g", "h", "i", "j", "k", "l", "m", "n", "o", "p", "q", "r", "s", "t", "u", "v", "w", "x", "y", "z"];
            word = words[Math.floor(Math.random() * words.length)];

            // create underscores based on word length
            //================================================================================================

            function generateUnderscores() {
                for (i = 0; i < word.length; i++) {
                    underscores.push("_");
                };
                return underscores
            };



            console.log(generateUnderscores());
            console.log(word);

            document.getElementById("current-word").textContent = underscores.join(" ");
        };
        newWord();


        // listen for userGuess
        //================================================================================================

        document.onkeyup = function (event) {
            var userGuess = event.key;


            document.getElementById("guesses-left").textContent = guessesLeft;

            // only allow letter keys and only once
            if (lettersLeft.indexOf(userGuess) != -1) {
                lettersLeft.splice(lettersLeft.indexOf(userGuess), 1);


                //if guess is correct push into underscores, win
                if (word.indexOf(userGuess) > -1) {

                    underscores[word.indexOf(userGuess)] = userGuess;

                    console.log(underscores);

                    document.getElementById("current-word").textContent = underscores.join(" ");

                    if (underscores.join("") == word) {
                        winsCount++;
                        alert("You Win!");
                        newWord();
                    };
                }
                //if guess is wrong lose a life and lose game
                else {
                    guessesLeft--;
                    wrongGuesses.push(userGuess);

                    if (guessesLeft == 0) {
                        alert("You Lost!");
                        newWord();
                    }
                }

                document.getElementById("wins-count").textContent = winsCount;
                document.getElementById("guesses-left").textContent = guessesLeft;
                document.getElementById("letters-guessed").textContent = wrongGuesses.join(", ");


            };
        };






    </script>
</body>

</html>