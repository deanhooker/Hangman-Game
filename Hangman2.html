<!DOCTYPE html>
<html lang="en-us">

<head>
    <meta charset="UTF-8">
    <title>Hangman</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u"
        crossorigin="anonymous">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
</head>

<body>
    <div class="jumbotron">
        <div class="container">
            <h1>Hangman!</h1>
            <h2>Single Word Movie Titles</h2>
        </div>
    </div>
    <div class="container-fluid">
        <h3>
            <p>Press any key to get started...</p>
        </h3>
        <p>
            <h3>Wins: </h3>
            <h3>
                <span id="wins-count">...</span>
            </h3>
        </p>
        <p>
            <h3>Current Word</h3>
        </p>
        <p>
            <h3>
                <span id="current-word">...</span>
            </h3>
        </p>
        <p>
            <h3>Number of guesses remaining:</h3>
        </p>
        <p>
            <h3>
                <span id="guesses-left">...</span>
            </h3>
        </p>
        <p>
            <h3>Letters already guessed</h3>
        </p>
        <p>
            <h3>
                <span id="letters-guessed">...</span>
            </h3>
        </p>
    </div>

    <script type="text/javascript">

        // words for game + global variables
        //================================================================================================
        var words = ['gravity', 'froozen', 'argo', 'birdman', 'milk', 'fargo', 'misery', 'aliens', 'rocky', 'jaws'];
        var word;;
        var underscores;
        var gameStart = false;
        var winsCount = 0;
        var guessesLeft;
        var wrongGuesses;
        var lettersLeft;

        // choose random word
        //================================================================================================
        function newWord() {
            underscores = [];
            guessesLeft = 12;
            wrongGuesses = [];
            lettersLeft = ["a", "b", "c", "d", "e", "f", "g", "h", "i", "j", "k", "l", "m", "n", "o", "p", "q", "r", "s", "t", "u", "v", "w", "x", "y", "z"];
            word = words[Math.floor(Math.random() * words.length)];

            // create underscores based on word length
            //================================================================================================

            function generateUnderscores() {
                for (i = 0; i < word.length; i++) {
                    underscores.push("_");
                };
                return underscores
            };

            console.log(generateUnderscores());
            console.log(word);

            document.getElementById("current-word").textContent = underscores.join(" ");
        };
        newWord();


        // listen for userGuess
        //================================================================================================

        document.onkeyup = function (event) {
            var userGuess = event.key.toLowerCase();


            document.getElementById("guesses-left").textContent = guessesLeft;

            // only allow letter keys and only once
            if (lettersLeft.indexOf(userGuess) != -1) {
                lettersLeft.splice(lettersLeft.indexOf(userGuess), 1);

                var found = false; //lets use bool to check if a letter was found
                for (i = 0; i < word.length; i++) {
                    if (userGuess === word[i]) {
                        underscores[i] = userGuess;
                        document.getElementById("current-word").innerHTML = underscores.join(" ");
                        found = true;

                        if (underscores.indexOf("_") == -1) {
                            winsCount++;
                            alert("You Win!");
                            newWord();
                        }
                    }
                }
                //now all letters have been checked, was any found
                if (found) return; //if yes return

  

                //if guess is wrong lose a life and lose game

                if (wrongGuesses.indexOf(userGuess) < 0) {
                    wrongGuesses.push(userGuess);
                    guessesLeft--;
                    document.getElementById("letters-guessed").innerHTML = wrongGuesses.join(" ");
                

                    if (guessesLeft == 0) {
                        alert("You Lost!");
                        newWord();
                    }
                }



                // document.getElementById("current-word").textContent = underscores.join(" ");
                document.getElementById("wins-count").textContent = winsCount;
                document.getElementById("guesses-left").textContent = guessesLeft;
                // document.getElementById("letters-guessed").textContent = wrongGuesses.join(", ");


            };


        };






    </script>
</body>

</html>